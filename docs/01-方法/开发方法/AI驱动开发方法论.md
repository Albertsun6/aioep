# AI 驱动开发方法论（执行细则）

> 文档版本: v0.3.0 | 创建日期: 2026-02-15 | 状态: 草稿
>
> **所属层级**：AI-EADM for Odoo（方法层）
> **上游方法论**：本文档是 [07-AI 协作协议](../00-方法论/07-AI协作协议/README.md) 的执行细则，包含 AI + Odoo 协作的具体流程和日常节奏。

---

## 1. 方法论总览

### 1.1 核心理念

传统 ERP 开发依赖大量人力，周期长、成本高。本方法论将 AI 编程助手作为**核心开发伙伴**深度融入每个环节，形成 **「人类决策 + AI 执行」** 的协作模式。

```
传统模式：                           AI 驱动模式：
人 → 分析 → 设计 → 编码 → 测试      人 → 决策 → 验证 → 发布
                                    AI → 分析 → 生成 → 测试 → 文档

传统效率：████████████ 100%
AI模式：  █████ 40~50%（时间成本）
```

### 1.2 人机分工原则

| 维度 | 人类负责 | AI 负责 |
|------|---------|---------|
| **需求** | 业务判断、优先级决策 | 需求整理、文档生成、Gap 分析 |
| **设计** | 架构决策、技术选型 | 方案对比、设计文档生成 |
| **编码** | 代码审查、逻辑验证 | 代码生成、模块脚手架、重构 |
| **测试** | 验收测试、体验评估 | 单元测试生成、测试数据构造 |
| **文档** | 审阅确认 | 全部文档生成和更新 |
| **部署** | 环境决策、上线审批 | 配置生成、脚本编写 |
| **运维** | 监控研判、故障决策 | 日志分析、问题定位 |

### 1.3 关键原则

1. **AI First, Human Verify** — AI 先输出，人类验证和修正
2. **Prompt as Specification** — 用精确的 Prompt 替代部分传统文档
3. **Continuous Context** — 通过 Cursor Rules 和 Chatlog 保持 AI 上下文连续
4. **Configuration over Coding** — Odoo 配置优先于代码开发
5. **Incremental Delivery** — 每个迭代都交付可运行的功能

---

## 2. 开发生命周期（AI-SDLC）

### 2.1 阶段总览

```
┌─────────────────────────────────────────────────────────────────────┐
│                    AI-SDLC 生命周期                                   │
│                                                                       │
│ Phase 0       Phase 1      Phase 2       Phase 3      Phase 4  Phase 5│
│ ┌────────┐  ┌────────┐   ┌────────┐   ┌─────────┐  ┌──────┐ ┌──────┐│
│ │AI 环境  │→ │ 发现   │ → │ 设计   │ → │迭代开发  │→ │ 验收 │→│ 运维 ││
│ │ 搭建   │  │ 分析   │   │ 架构   │   │(Sprint) │  │ 上线 │ │ 优化 ││
│ └────────┘  └────────┘   └────────┘   └─────────┘  └──────┘ └──────┘│
│  1 周        2~3 周       1~2 周      每轮 2~3 周   2~3 周   持续    │
│                                       共 4~6 轮                       │
│ ◄──新增──►  ◄─缩短50%─►  ◄缩短50%►  ◄──缩短30%──►                   │
└─────────────────────────────────────────────────────────────────────┘
```

**对比传统方式的时间节省：**

| 阶段 | 传统耗时 | AI 驱动耗时 | 节省 | 原因 |
|------|---------|------------|------|------|
| Phase 0 AI 环境搭建 | 0 | 1 周 | -1 周 | 新增阶段 |
| Phase 1 发现分析 | 4~6 周 | 2~3 周 | 50% | AI 加速文档整理和 Gap 分析 |
| Phase 2 设计架构 | 3~4 周 | 1~2 周 | 50% | AI 生成设计文档和数据模型 |
| Phase 3 迭代开发 | 每轮 3~4 周 | 每轮 2~3 周 | 30% | AI 生成代码 + 测试 |
| Phase 4 验收上线 | 4~6 周 | 2~3 周 | 50% | AI 生成测试用例和部署脚本 |
| **总计** | **约 30~40 周** | **约 16~24 周** | **~45%** | |

---

### 2.2 Phase 0：AI 开发环境搭建（1 周）

> 传统 SDLC 中没有此阶段。这是 AI 驱动模式的独特之处。

#### 目标
配置 AI 工具链，使 AI 编程助手具备项目上下文，能持续高质量输出。

#### 活动清单

| 活动 | 说明 | 产出物 |
|------|------|--------|
| 配置 Cursor IDE | 安装插件、配置 AI 规则 | `.cursor/rules/` 配置文件 |
| 编写 AI Rules | Odoo 开发规范、项目约定、代码风格 | `.cursor/rules/*.md` |
| 创建 Prompt 模板库 | 常用开发场景的 Prompt 模板 | `docs/prompts/` 目录 |
| 搭建 Odoo 开发环境 | Docker Compose + 源码环境 | `docker-compose.yml` |
| 初始化项目仓库 | Git 仓库、分支策略、CI/CD | GitHub 仓库 |
| 建立知识库 | Odoo 开发文档、API 参考 | `docs/references/` |

#### 关键产出物
- `.cursor/rules/`：Odoo 开发规范、Python 编码规范、XML 视图规范、安全规则、测试规范、Git 工作流、项目上下文
- `docs/prompts/`：常用开发场景的 Prompt 模板（创建模型/视图/向导/报表/API/测试等）

---

### 2.3 Phase 1：发现与分析（2~3 周）

#### AI 加速方式

| 传统做法 | AI 加速做法 |
|---------|-----------|
| 人工梳理业务流程 | 向 AI 描述业务场景，AI 生成 BPMN 流程文档 |
| 人工编写 BRD | AI 根据访谈记录生成需求文档 |
| 人工做 Gap-Fit 分析 | AI 分析 Odoo 源码，自动匹配需求与功能 |
| 人工整理数据字典 | AI 根据业务描述生成数据字典初稿 |

#### 工作流程
业务方描述需求 → 人类整理为结构化描述 → AI 生成 BRD 初稿 → AI 生成 Gap-Fit 报告 → 人类审阅确认 → AI 生成最终文档

#### 产出物
- 业务需求规格说明书（BRD）
- Gap-Fit 分析报告
- 业务流程图集
- 数据字典
- 外部集成需求清单

---

### 2.4 Phase 2：设计与架构（1~2 周）

#### AI 加速方式

| 传统做法 | AI 加速做法 |
|---------|-----------|
| 人工设计数据模型 | 人类定义核心实体，AI 生成完整 ER 图和字段定义 |
| 人工写架构文档 | AI 根据需求生成架构设计文档 |
| 人工设计 API | AI 根据业务场景生成 API 规范 |
| 人工写技术方案 | AI 生成多个方案对比，人类决策 |

#### 工作流程
人类确定技术选型 → AI 生成架构设计文档 → AI 生成数据模型设计 → AI 生成接口定义 → 人类评审调整 → AI 更新文档

#### 产出物
- 系统架构设计文档（SAD）
- 数据模型设计（ER 图 + 字段说明）
- 模块设计文档（每模块）
- 接口设计文档
- 技术方案说明书

---

### 2.5 Phase 3：迭代开发（每轮 2~3 周，共 4~6 轮）

这是效率提升最大的阶段。每个 Sprint 内部流程如下：

#### Sprint 内部流程

```
Day 1-2: Sprint 规划
┌──────────────────────────────────────────────────┐
│ 人类：从 Backlog 选取本轮任务，明确验收标准        │
│ AI：将任务拆解为技术子任务，生成实施计划            │
└──────────────────────────────────────────────────┘
                    ↓
Day 3-12: 开发循环（每个功能点重复此循环）
┌──────────────────────────────────────────────────┐
│                                                    │
│  ┌──────────┐   ┌──────────┐   ┌──────────┐      │
│  │ AI 生成   │ → │ 人类验证  │ → │ AI 修正   │     │
│  │ 代码初稿  │   │ 反馈修改  │   │ 补充完善  │     │
│  └──────────┘   └──────────┘   └──────────┘      │
│       ↓                                            │
│  ┌──────────┐   ┌──────────┐                      │
│  │ AI 生成   │ → │ 运行测试  │ → 通过 → 提交       │
│  │ 测试用例  │   │ 修复问题  │   不通过 → 循环      │
│  └──────────┘   └──────────┘                      │
│                                                    │
└──────────────────────────────────────────────────┘
                    ↓
Day 13-14: Sprint 收尾
┌──────────────────────────────────────────────────┐
│ AI：生成本轮文档、更新 Chatlog                      │
│ 人类：Demo 演示、收集反馈、规划下轮                  │
└──────────────────────────────────────────────────┘
```

#### 功能点开发循环示例
以"采购订单审批"为例：人类描述需求 → AI 分析并生成实施方案 → AI 生成代码（模型/视图/权限/数据） → 人类审查反馈 → AI 修正代码 → AI 生成测试用例 → 人类验证 → 提交代码并更新文档

---

### 2.6 Phase 4：验收与上线（2~3 周）

#### AI 辅助方式

| 活动 | AI 角色 |
|------|--------|
| UAT 测试用例编写 | AI 根据需求文档生成完整测试用例清单 |
| 缺陷修复 | AI 快速定位问题，生成修复代码 |
| 部署脚本 | AI 生成 Docker/CI 配置和部署脚本 |
| 数据迁移 | AI 编写数据迁移脚本 |
| 用户手册 | AI 根据功能生成操作手册 |
| 培训材料 | AI 生成培训 PPT 大纲和操作视频脚本 |

---

### 2.7 Phase 5：运维与持续优化（持续）

| 活动 | AI 角色 |
|------|--------|
| 日志分析 | AI 分析错误日志，定位根因 |
| 性能优化 | AI 分析慢查询，建议索引和优化方案 |
| 需求变更 | AI 快速评估影响范围，生成修改方案 |
| 版本升级 | AI 分析升级兼容性，生成迁移指南 |
| 知识沉淀 | AI 持续更新文档和 FAQ |

---

## 3. AI 协作工作流

### 3.1 日常开发节奏

```
┌────── 每日开发流程 ──────────────────────────────┐
│                                                    │
│  08:00  回顾昨日进度，查看 Chatlog                  │
│         ↓                                          │
│  08:30  与 AI 对齐今日目标                          │
│         "今天完成采购入库模块的模型和视图"             │
│         ↓                                          │
│  09:00  AI 生成代码 → 人类审查 → 反馈修正            │
│  ~12:00 （循环进行）                                │
│         ↓                                          │
│  13:00  继续开发 / 处理上午遗留问题                  │
│  ~17:00                                            │
│         ↓                                          │
│  17:00  AI 生成当日总结，更新 Chatlog               │
│         提交代码，推送到远程仓库                      │
│         ↓                                          │
│  17:30  规划明日任务                                │
│                                                    │
└──────────────────────────────────────────────────┘
```

### 3.2 AI 上下文管理与质量保障

**AI 上下文管理策略**：详见 [07-AI协作协议](../00-方法论/07-AI协作协议/README.md) 第4章。

**AI 输出质量保障**：通过 Prompt 工程、Cursor Rules、人工审查和自动化测试四层防线保障，详见 [07-AI协作协议](../00-方法论/07-AI协作协议/README.md) 第2章。

---

## 4. 工件（Artifacts）管理

### 4.1 每个 Sprint 的标准工件

| 工件 | 生成方式 | 存储位置 |
|------|---------|---------|
| Sprint Backlog | 人类创建 + AI 辅助拆分 | GitHub Issues |
| 代码 | AI 生成 + 人类审查 | Git 仓库 |
| 单元测试 | AI 生成 | `tests/` 目录 |
| 模块文档 | AI 生成 | `docs/modules/` |
| API 文档 | AI 生成 | `docs/api/` |
| 变更日志 | AI 生成 | `CHANGELOG.md` |
| 对话记录 | 自动记录 | `docs/Chatlog.md` |

### 4.2 文档自动化
代码提交后，AI 自动分析变更并更新模块 README、API 文档、数据模型文档、变更日志和 Chatlog。

---

## 5. 度量与改进

### 5.1 关键指标

| 指标 | 目标值 | 度量方式 |
|------|--------|---------|
| Sprint 完成率 | > 85% | 完成任务数 / 计划任务数 |
| AI 代码采纳率 | > 70% | 采纳代码量 / AI 生成代码量 |
| 缺陷密度 | < 5 个/模块 | UAT 发现缺陷数 / 模块数 |
| 测试覆盖率 | > 80% | 自动化测试覆盖 |
| 文档覆盖率 | 100% | 有文档的模块 / 总模块数 |

### 5.2 持续改进

每个 Sprint 结束后进行回顾：

1. **AI 效果评估**：哪些场景 AI 表现好？哪些需要改进 Prompt？
2. **Rules 优化**：根据实际开发经验更新 Cursor Rules
3. **Prompt 优化**：优化常用 Prompt 模板
4. **流程优化**：调整工作流中不顺畅的环节

---

## 变更记录

| 版本 | 日期 | 修改人 | 修改内容 |
|------|------|--------|---------|
| v0.1.0 | 2026-02-15 | AI + 项目负责人 | 初始版本 |
| v0.2.0 | 2026-02-15 | AI + 项目负责人 | 补充 AI 上下文管理和质量保障章节 |
| v0.3.0 | 2026-02-16 | AI + 项目负责人 | 精简文档，删除与 07-AI协作协议 重叠内容，改为引用 |
