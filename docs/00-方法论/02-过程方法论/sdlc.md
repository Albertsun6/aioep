# SDLC 阶段框架

> 状态: **已确认** | 版本: v0.5.0 | 创建: 2026-02-15 | 更新: 2026-02-16

## 定位

软件开发生命周期框架。定义 Phase 0~3 的阶段划分和每个阶段的进入/退出标准。

> 4 阶段模型，适合 1 人 + AI 项目。每个阶段有唯一职责，满足 MECE 原则（相互独立、完全穷尽）。

---

## 阶段总览

```
Phase 0              Phase 1              Phase 2                       Phase 3
规划与准备           需求分析与设计         全部开发(Sprint 0~4)            测试+上线+交付
 0A规划+0B准备        2~3 周               12 周                          4 周
   │                   │                    │                              │
  M0                  M1                  M2  M3  M4  M5               M6  M7
 规划+环境就绪      分析完成            基础 采购 库存 集成           验收通过 全量上线
                   (不写代码)           上线 销售 财务 报表          (不写新代码)
```

## MECE 原则检查

| 阶段 | 唯一职责 | 产出类型 | 核心动词 |
|------|---------|---------|---------|
| Phase 0 | 规划 + 环境准备 | 文档 + 基础设施 | 规划、搭建 |
| Phase 1 | 分析 + 设计 | 文档 + 模型 | 分析、建模、设计 |
| Phase 2 | **所有编码** | 代码 + 测试 | 开发、测试、集成 |
| Phase 3 | 验收 + 交付 + 运维移交 | 测试报告 + 生产部署 | 验收、部署、培训、交接 |

- **ME（相互独立）**：代码只在 Phase 2 写；Phase 1 不写代码；Phase 3 不写新代码
- **CE（完全穷尽）**：覆盖从规划到运维交接的全生命周期

---

## 各阶段定义

### Phase 0：规划与准备（Planning & Preparation）

**目标**：完成战略规划、方法论制定和环境准备，为 Phase 1 分析提供完整基础。

> Docker 环境提前搭好是为了 Phase 1 能实际探索 Odoo 标准功能，支撑 Gap-Fit 分析。

**主导方法论**：TOGAF Preliminary + Phase A（规划与架构愿景）+ DevOps（环境准备）

#### Phase 0A：规划（Planning）

**活动**：
1. **战略规划**（业务愿景、当前痛点、战略目标、成功指标、范围优先级、变革管理策略）
2. 方法论制定（AI-EADM 9 域体系）
3. 项目定义（项目章程、路线图、术语表——基于战略目标制定）
4. 开发规范制定（Cursor Rules 6 个文件）
5. 方法层定义（AI-EADM for Odoo）

> 战略规划是规划阶段的第一个活动，对应 TOGAF Phase A（架构愿景）。它为后续所有活动提供方向：项目定义基于战略目标，需求分析追溯到战略目标，Sprint 优先级由战略价值决定。

**交付物**：
- [ ] `docs/02-项目/战略规划.md` — 战略规划文档（业务愿景/痛点/目标/KPI/优先级/变革策略）
- [x] `docs/00-方法论/` — AI-EADM 方法论 9 域文档
- [x] `docs/01-方法/` — AI-EADM for Odoo 方法文档
- [x] `docs/02-项目/` — 项目章程、架构设计、路线图
- [x] `docs/术语表.md` — 统一术语表
- [x] `.cursor/rules/` — 6 个开发规范文件

#### Phase 0B：准备（Preparation）

**活动**：
1. GitHub 仓库创建、项目目录结构初始化
2. Docker 开发环境搭建（Odoo 17 + PostgreSQL 16 + Redis 7）
3. 工程化配置（Makefile、GitHub Actions CI）
4. 模块脚手架验证（测试模块安装成功 + 测试通过）

**交付物**：
- [x] `docker-compose.yml` + `config/odoo.conf`
- [x] `Makefile` 常用命令
- [x] `.github/workflows/ci.yml` CI 配置
- [x] `custom_addons/erp_test/` 测试模块（4 个测试通过）
- [x] `README.md` 项目说明

#### 进入条件（Entry）

- 开发机器可用（macOS + Docker Desktop + Cursor IDE）

#### 退出条件（Exit）

- **战略规划文档已确认**（业务愿景、目标、KPI、优先级明确）
- 方法论核心文档已确认
- Docker 环境一键启动，Odoo 可访问
- 6 个 Cursor Rules 文件完整
- CI 流水线可用
- 测试模块通过
- 术语表、Chatlog 规范在用

---

### Phase 1：需求分析与设计（Analysis & Design）

**目标**：彻底搞清楚"做什么"和"怎么做"。纯分析、纯设计，不写任何业务代码。

**核心原则**：先理解业务，再动手开发。避免"做出来不是要的"。

**主导方法论**：TOGAF（企业架构）+ BPMN（业务流程）+ DDD（领域划分）+ BDD（行为规格）

**进入条件（Entry）**：
- Phase 0 退出条件全部满足

**主要活动**：
1. 业务需求收集和整理（BRD 业务需求规格）
2. Gap-Fit 分析（Odoo 标准功能 vs 定制需求）
3. 企业架构建模（ArchiMate 全景图）
4. 核心业务流程建模（BPMN：采购/销售/库存/财务/审批）
5. 数据模型设计（UML 类图：核心模型及关系）
6. 权限角色设计（RBAC 矩阵）
7. 关键场景的 BDD 行为规格（Given/When/Then）
8. **数据迁移方案规划**（现有数据源、迁移策略、字段映射）
9. **回滚与容灾方案设计**（回滚步骤、备份策略、应急预案）
10. Phase 2 的 Sprint 规划（基于 Gap-Fit 结果排定开发顺序）

**交付物**（全部为文档和模型，无代码）：
- [ ] 业务需求规格（BRD）
- [ ] Gap-Fit 分析报告（含处理策略和工作量估算）
- [ ] ArchiMate 企业架构模型
- [ ] BPMN 核心业务流程图（至少 5 个流程）
- [ ] UML 数据模型图（核心模型关系）
- [ ] RBAC 权限矩阵
- [ ] BDD 行为规格（关键业务场景）
- [ ] 数据迁移方案
- [ ] 回滚与容灾方案
- [ ] Phase 2 Sprint 规划

**退出条件（Exit）**：
- 业务需求已收集并确认
- Gap-Fit 分析完成，每项需求有明确的处理策略
- 核心业务流程有流程图
- 数据模型设计覆盖核心模块
- 数据迁移方案和回滚方案已设计
- Phase 2 Sprint 规划已确定
- **无代码交付要求**

---

### Phase 2：全部开发（All Development）

**目标**：完成所有代码开发——erp_base + 4 大核心模块 + 报表 + 外部集成。

**唯一职责**：本阶段是项目中唯一写代码的阶段。

**主导方法论**：Agile/Scrum（Sprint 迭代）+ TDD + BDD

**进入条件（Entry）**：
- Phase 1 退出条件全部满足（分析产出物全部确认）

**Sprint 规划**：

| Sprint | 周数 | 内容 | 里程碑 |
|--------|------|------|--------|
| Sprint 0 | 第 6~7 周 | erp_base（组织架构、权限、审批、配置） | M2：基础平台上线 |
| Sprint 1 | 第 8~10 周 | erp_purchase + erp_sale | M3：采购销售上线 |
| Sprint 2 | 第 11~13 周 | erp_stock + erp_account | M4：库存财务上线 |
| Sprint 3 | 第 14~15 周 | erp_integration + erp_report + 外部服务 | M5：集成+报表上线 |
| Sprint 4 | 第 16~17 周 | 全模块联调 + Bug 修复 + 性能优化 | 全模块联调通过 |

**Scrum 事件**：
- Sprint 周期：2~3 周
- Sprint Planning：Sprint 开始第 1 天
- Daily Check：每天开始前自我检查 + Chatlog 记录
- Sprint Review：Sprint 结束时功能演示
- Sprint Retro：Sprint 结束时反思改进

**每个 Sprint 交付物**：
- [ ] 模块代码（安装成功 + 测试通过）
- [ ] 模块文档（设计说明 + 流程图更新）
- [ ] 权限配置（ir.model.access + 记录规则）
- [ ] 演示数据
- [ ] Sprint Review 记录

**Phase 2 整体退出条件**：
- 所有模块安装成功
- 至少 1 条完整端到端业务流程可走通（采购→入库→销售→出库→财务）
- 所有模块测试覆盖率 ≥ 80%
- 核心页面响应时间 < 2s
- **安全审计通过**（明确的审计活动，不只是隐含条件）
- **性能测试通过**（明确的测试活动）
- 集成模块与外部服务通信正常
- 数据迁移脚本编写完成并在测试环境验证

---

### Phase 3：测试 + 上线 + 交付（Testing & Delivery）

**目标**：端到端验收、正式上线和运维交接。本阶段不写新功能代码，只修复 Bug。

**唯一职责**：验证、交付和移交。

**主导方法论**：SDLC（结构化验收）+ DevOps（部署）+ ITIL（服务移交）

**进入条件（Entry）**：
- Phase 2 退出条件全部满足

**主要活动**：

#### 测试验收
1. 端到端集成测试（完整业务流程 across 所有模块）
2. UAT 验收测试（业务方按 BDD 场景逐项确认）
3. 性能回归测试（生产环境配置下的性能验证）
4. 安全回归测试（生产环境配置下的安全验证）

#### 上线部署
5. 生产环境准备（服务器、SSL、监控、备份）
6. 数据迁移执行 + 数据校验
7. 灰度/蓝绿部署
8. 回滚方案演练

#### 交付移交
9. **用户培训**（按角色分组：管理员/采购/销售/仓库/财务）
10. **用户操作手册**（按角色分册）
11. **运维手册**（日常维护、监控告警、备份恢复）
12. 上线后监控（至少 1 周观察期）
13. 运维交接（服务正式移交）

**交付物**：
- [ ] 集成测试报告
- [ ] UAT 测试报告（业务方签字）
- [ ] 性能测试报告
- [ ] 安全审计报告
- [ ] 数据迁移校验报告
- [ ] 生产环境部署（已验证）
- [ ] 用户操作手册（按角色分册）
- [ ] 运维手册
- [ ] 培训记录
- [ ] 回滚方案（已演练）

**退出条件（Exit）**：
- UAT 验收通过（业务方签字确认）
- 数据迁移验证通过
- 生产环境健康检查通过
- 回滚方案已演练验证
- 用户培训完成
- 运维手册交付
- 1 周观察期无 P0/P1 缺陷

---

## 阶段衔接：交接物一览

```
Phase 0 → Phase 1           Phase 1 → Phase 2           Phase 2 → Phase 3
───────────────             ───────────────             ───────────────
方法论文档(9域)              BRD 需求文档                 所有模块代码
方法层文档                   Gap-Fit 报告                 端到端流程可用
项目文档                     BPMN 流程图                  测试报告
Cursor Rules                 UML 数据模型                 安全审计报告
术语表                       RBAC 权限矩阵               性能测试报告
Docker 环境                  BDD 行为规格                 数据迁移脚本(已测试)
CI/CD 流水线                 数据迁移方案                 集成模块+外部服务
Makefile                     回滚方案
                             Sprint 规划
```

每个阶段的交付物是下一阶段的输入。阶段门禁确保交付物质量合格后再推进。

- Phase 0 产出文档和环境
- Phase 1 只产出文档和模型，不产出代码
- Phase 2 产出所有代码（唯一写代码的阶段）
- Phase 3 不写新代码，只修 Bug、测试、部署、交付

---

## 与 Agile 的混合方式

- **Phase 0**：0A 规划（TOGAF Preliminary）+ 0B 准备（DevOps）
- **Phase 1**：SDLC 结构化分析 + TOGAF/BPMN/DDD/BDD
- **Phase 2**：Scrum 迭代（Sprint 0~4，所有代码在此阶段）
- **Phase 3**：SDLC 结构化验收 + DevOps 部署 + ITIL 服务移交
- **贯穿全程**：DevOps（CI/CD）、Lean（减少浪费）

---

## 与其他文档的关系

- **上游**：[02-过程方法论 README](./README.md)
- **实例化**：[项目路线图](../../02-项目/项目路线图.md)
- **质量对齐**：[05-质量框架](../05-质量框架/README.md)
- **核心约束**：[01-核心原则](../01-核心原则/README.md)

---

## 变更记录

| 版本 | 日期 | 修改内容 |
|------|------|---------|
| v0.1.0 | 2026-02-15 | 占位创建 |
| v0.2.0 | 2026-02-15 | 填充 Phase 0~3 定义 |
| v0.3.0 | 2026-02-16 | Phase 1 改为纯分析，erp_base 移入 Phase 2 |
| v0.4.0 | 2026-02-16 | Phase 0 改为"规划与准备"，拆分 0A+0B |
| v0.5.0 | 2026-02-16 | MECE 修复：集成开发移入 Phase 2；Phase 3 纯测试+交付；补充迁移/回滚/培训/安全 |
| v0.6.0 | 2026-02-16 | Phase 0A 加入战略规划作为第一个活动，退出条件增加战略规划确认 |
