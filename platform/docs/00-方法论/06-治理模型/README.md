# 06 - 治理模型

> 状态: **已确认** | 版本: v0.2.0 | 创建: 2026-02-15 | 更新: 2026-02-15

## 定位

定义项目"怎么管理和决策"。包含决策权分配、评审机制、变更管理和文档治理。对应核心原则 P1（质量可控）和 P2（全面透明）。

---

## RACI 决策权矩阵

> R=负责执行 A=审批决策 C=咨询意见 I=知情通报

### 方法论与架构决策

| 决策领域 | 开发者 | AI 助手 | 业务顾问 | 管理层 |
|---------|:---:|:---:|:---:|:---:|
| 方法论选择和调整 | RA | C | I | I |
| 系统架构决策 | RA | C | I | I |
| 技术选型 | RA | C | - | I |
| 安全策略 | RA | C | - | I |

### 业务与需求决策

| 决策领域 | 开发者 | AI 助手 | 业务顾问 | 管理层 |
|---------|:---:|:---:|:---:|:---:|
| 需求优先级 | C | - | R | A |
| 业务规则确认 | I | - | RA | I |
| 需求变更审批（小） | RA | - | C | I |
| 需求变更审批（大） | R | - | C | A |

### 开发与交付决策

| 决策领域 | 开发者 | AI 助手 | 业务顾问 | 管理层 |
|---------|:---:|:---:|:---:|:---:|
| 代码质量判定 | A | RC | - | - |
| 模型正确性判定 | A | C | R（业务模型） | - |
| Sprint 范围 | RA | C | C | I |
| 上线决策 | R | - | C | A |
| 预算决策 | I | - | C | RA |

> **关键规则**：AI 的 R（负责）产出都需要人类的 A（审批）才能生效。AI 不拥有任何审批权。

---

## 评审机制

### 1. 代码评审（每次提交）

| 维度 | 定义 |
|------|------|
| 触发 | 每次代码提交（git push） |
| 流程 | AI 生成代码 → 人类审查 → 通过则合入 |
| 审查清单 | 引用 [05-质量框架](../05-质量框架/README.md) L2 人工审查层 |

审查重点：
- 业务逻辑正确性（AI 经常遗漏边界条件）
- 安全性（权限、SQL 注入、XSS）
- Odoo 规范（_inherit 而非改源码、命名约定）
- 性能（N+1 查询、大数据量场景）
- 可维护性（注释、方法长度、硬编码）

### 2. 模型评审（模型完成时）

| 维度 | 定义 |
|------|------|
| 触发 | BPMN / ArchiMate / UML 模型创建或重大修改时 |
| 参与 | 业务模型（BPMN）→ 业务顾问确认；技术模型（UML/C4）→ 开发者自审 |
| 标准 | 与需求一致、元素使用正确、命名规范 |

### 3. Sprint Review（每轮迭代末）

| 维度 | 定义 |
|------|------|
| 频率 | 每 2~3 周（Sprint 结束时） |
| 参与 | 开发者 + AI + 业务顾问（按需邀请管理层） |
| 内容 | 功能演示 → 反馈收集 → 下轮规划调整 |
| 产出 | Sprint 回顾记录（追加到 Chatlog） |

### 4. 里程碑评审（Phase 转换时）

| 维度 | 定义 |
|------|------|
| 触发 | Phase 0→1、1→2、2→3 转换时 |
| 参与 | 所有相关干系人 |
| 标准 | 对应阶段的质量门禁全部通过（引用 [05-质量框架](../05-质量框架/README.md)） |
| 决策 | Go（进入下一阶段）/ No-Go（修复后重新评审） |

---

## 变更管理

### 变更分级

| 级别 | 定义 | 审批权 | 示例 |
|------|------|--------|------|
| 小变更 | 不影响架构和排期 | 开发者自主决定 | 字段调整、视图优化 |
| 中变更 | 影响当前 Sprint 范围 | 开发者 + 业务顾问协商 | 新增审批节点、报表需求 |
| 大变更 | 影响架构或跨 Sprint | 需管理层审批 | 新增业务模块、外部系统集成 |

### 变更流程

```
变更请求提出（任何人）
  ↓
影响评估（开发者 + AI 辅助）
  ├── 评估范围：影响哪些模块/模型/测试
  ├── 评估工作量：S/M/L/XL
  └── 评估风险：对已有功能的影响
  ↓
变更分级（按上表判定）
  ↓
决策
  ├── 接受 → 纳入 Backlog → 按优先级排入 Sprint
  ├── 拒绝 → 记录原因
  └── 延后 → 标记版本号（v1.1 / v2.0）
  ↓
执行（如接受）
  └── 更新相关文档和模型
```

### 紧急变更

仅限 P0/P1 级别缺陷：
- 跳过正常评审流程，直接修复
- 修复后补充评审记录
- 事后回顾，分析根因

---

## 文档治理

| 维度 | 规则 |
|------|------|
| 版本管理 | 每个文档头部标注版本号和状态 |
| 状态流转 | 占位 → 纲要 → 草稿 → 已确认 |
| 更新责任 | 谁修改代码/模型谁更新对应文档 |
| AI 文档 | AI 生成的文档标注"AI 生成"，人类审阅后移除标注 |
| 审阅要求 | L1 域级文档需审阅后标记"已确认"；L2 占位文件无需审阅 |

---

## Kanban 看板

### 看板列定义

```
| Backlog | 分析中 | 设计中 | 开发中 | 测试中 | 待验收 | 完成 |
|         |       |       | WIP:3  | WIP:2 |       |      |
```

| 列 | 进入条件 | 退出条件 | WIP |
|----|---------|---------|-----|
| Backlog | 需求已记录 | 已评估优先级 | 无限 |
| 分析中 | 优先级已确定 | 需求清晰 + BDD 规格 | 无限 |
| 设计中 | BDD 规格完成 | 模型完成（BPMN/UML） | 无限 |
| 开发中 | 模型评审通过 | 代码 + 测试通过 | **3** |
| 测试中 | 代码提交 | 测试全部通过 | **2** |
| 待验收 | 测试通过 | 业务方确认 | 无限 |
| 完成 | 验收通过 | - | - |

### 工具

- 使用 **GitHub Projects**（看板视图）
- 每个任务对应一个 GitHub Issue
- Issue 标签对应看板列

---

## 与其他文档的关系

- **上游**：[01-核心原则](../01-核心原则/README.md)（P1 质量可控、P2 全面透明）
- **质量门禁**：[05-质量框架](../05-质量框架/README.md)（评审标准对齐质量门禁）
- **角色**：[08-角色](../08-角色/README.md)（RACI 矩阵基于角色定义）
- **ITIL**：[02-过程方法论](../02-过程方法论/README.md)（变更管理上线后由 ITIL 接管）

---

## 方法文件治理规则

> 对 `docs/01-方法/` 下所有方法文件的强制约束。

### 拆分规则

| 约束类型 | 规则 | 说明 |
|---------|------|------|
| **核心约束** | 单一职责 | 每个方法文件只解决一个问题。判断：能否用一句话说清用途？ |
| **检查信号** | 200 行 | 超过 200 行时审视是否违反单一职责。没违反则不拆 |
| **健康指标** | 树深度 ≤ 4 层 | 超过 4 层说明拆得过细，需要合并 |

### 方法文件标准结构

每个方法文件**必须**包含以下 6 个部分：

```markdown
# {方法名}

> 状态 / 版本 / 上次验证日期

## 定位
一句话说明本方法解决什么问题。

## 前置条件
执行本方法前需要什么输入/准备。

## 步骤
具体执行步骤（编号列表）。

## 模板
可直接复用的模板。简单模板内联，复杂模板用独立文件"模板-{名称}.md"。

## 检查清单
完成后的自检项。

## 输出
本方法执行后应产出什么。
```

### 方法生命周期

```
创建（纲要）→ 细化（填充步骤）→ 首次执行 → 验证回顾 → 标记"已验证"或"需修正"
```

| 状态 | 含义 |
|------|------|
| 纲要 | 有定位和大纲，步骤待填充 |
| 已细化 | 步骤完整，未经实际执行验证 |
| 已验证 | 经过至少一次实际执行，确认可用 |
| 需修正 | 执行中发现问题，待修正 |

### 命名规范

- 方法文件：`{动作或对象}方法.md`（如 `gap-fit方法.md`）
- 模板文件：`模板-{名称}.md`（如 `模板-战略规划.md`）
- 目录名：`{方法名}/`（当方法拆分为子方法时）
- 拆分后的目录内必须有 `README.md` 作为索引

### 模板管理规则

- 每个方法的"输出"如果有固定格式，必须有对应模板
- 模板与方法文件同目录（高内聚，不单独建模板目录）
- 简单模板（< 30 行）：内联在方法文件的"模板"章节
- 复杂模板（≥ 30 行）：独立文件 `模板-{名称}.md`
- 项目层的文档是模板的填充实例，不是模板本身
- 新项目复用：复制整个 `01-方法/` 目录即可获得所有方法 + 模板

---

## 与其他文档的关系

- **上游**：[01-核心原则](../01-核心原则/README.md)（P1 质量可控、P2 全面透明）
- **质量门禁**：[05-质量框架](../05-质量框架/README.md)（评审标准对齐质量门禁）
- **角色**：[08-角色](../08-角色/README.md)（RACI 矩阵基于角色定义）
- **方法层管理**：[01-方法/](../../01-方法/README.md)（方法文件治理规则的执行对象）

---

## 变更记录

| 版本 | 日期 | 修改内容 |
|------|------|---------|
| v0.1.0 | 2026-02-15 | 纲要创建 |
| v0.2.0 | 2026-02-15 | RACI 完善分类、评审机制4类、变更管理分级流程、看板定义 |
| v0.3.0 | 2026-02-16 | 新增方法文件治理规则（拆分/结构/生命周期/命名） |
